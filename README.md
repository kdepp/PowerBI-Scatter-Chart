# PowerBI-Scatter-Chart for Become

## Important Notes

- This repo uses `powerbi-visuals-tools` (pbiviz) v2.1.0, you should stick with it, and don't waste time on newer version. I (Taining) has tried 3.1.8, but `powerbi.extensibility.utils` is undefined, and seems that API has been changed, I suspect v3 is a breaking update
- Node v8 is the latest node version I've tried that is working, no luck with v14
- Muse use pbiviz (v2.1.0) in local `./node_modules` instead of any global installation you have
- Must install localhost certificate generated by pbiviz
  - `npm run cert`, internally it's `pbiviz --create-cert`. That's for v2.  (v3 uses `pbiviz --install-cert`, not what we want here)
  - Further instructions
    - Install certificate in KeyChain and update it to "Always Trust" as per following links
    - Restart Chrome after installing
    - https://docs.microsoft.com/en-us/power-bi/developer/visuals/create-ssl-certificate
    - https://docs.microsoft.com/en-us/power-bi/developer/visuals/environment-setup?tabs=sdk2osx#create-and-install-a-certificate
- Must run `npm start` instead of `pbiviz start`


## How to validate your local env is working

- After a successful certificate installation and `npm start`
- Download [US Sales Analysis.pbix](https://microsoft.github.io/PowerBI-visuals/docs/step-by-step-lab/images/US_Sales_Analysis.pbix)
- Upload it to https://app.powerbi.com/
- Open the report
  - >> Edit
  - >> Add "Developer Visual" into report
  - >> Select fields  (i.e.  Region.Region and Sales.Quantity)
  - >> You should see circles appear in the report


## How to test local env in Become Test Report

- Open https://app.powerbi.com/groups/me/reports/2bfffe88-c595-432f-a27e-80dea56dfac5/ReportSectionc2e153af1807cb103037 
  - This link might only work for Taining
  - Ask David for the pbix file otherwise
- Go to "Breadth and Depth"
- Edit
- You can see that the graph is "Scatter Chart by Become"
- Select Developer Visual (Make sure the original graph is selected first, so that your click on "Developer Visual" will replace the original visual instead of creating a new one)
- Update fields to following
  - Details - StudentName: StudentName
  - X Axis - Breadth: per_of_visits_st
  - Y Axis - Depth: depth_st_measure
  - Size - Selected Size: Dynamic Display
